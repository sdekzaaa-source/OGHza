<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aquarius Diadem Gacha Simulator</title>
    <!-- ‡πÇ‡∏´‡∏•‡∏î Tailwind CSS ‡∏ú‡πà‡∏≤‡∏ô CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡πÅ‡∏•‡∏∞ Custom CSS ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;700;800&display=swap');
        body {
            font-family: 'Sarabun', sans-serif;
        }
        .georgia-font {
            font-family: 'Georgia', serif;
        }
        .mask-gradient {
            -webkit-mask-image: linear-gradient(to bottom, black 40%, transparent 100%);
            mask-image: linear-gradient(to bottom, black 40%, transparent 100%);
        }
        /* ‡∏•‡∏ö Scrollbar ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏¢‡∏≤‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        
        /* ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡πÄ‡∏î‡πâ‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏Ç‡∏≠‡∏á‡πÑ‡∏≠‡πÄ‡∏ó‡∏° (Pop-up) */
        @keyframes popUp {
            0% { transform: scale(0.3); opacity: 0; }
            70% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        .animate-pop-up {
            animation: popUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
        
        /* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÅ‡∏™‡∏á‡∏ß‡∏¥‡∏ö‡∏ß‡∏±‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö SSR */
        .shimmer {
            background: linear-gradient(120deg, transparent 20%, rgba(255,255,255,0.8) 40%, rgba(255,255,255,0.8) 60%, transparent 80%);
            background-size: 200% 100%;
            animation: shimmer 2.5s infinite linear;
        }
        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        .ssr-glow {
            box-shadow: 0 0 15px rgba(251, 191, 36, 0.8), inset 0 0 10px rgba(251, 191, 36, 0.5);
        }
    </style>
</head>
<body class="min-h-screen bg-[#0d071a] p-4 md:p-8 text-slate-800 relative overflow-x-hidden">

    <!-- ‡∏ò‡∏µ‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏ß‡∏Å‡∏≤‡∏® -->
    <div class="absolute top-0 left-0 w-full h-[600px] pointer-events-none overflow-hidden mask-gradient">
        <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-purple-600/40 rounded-full mix-blend-screen filter blur-[100px]"></div>
        <div class="absolute top-1/3 right-1/4 w-[500px] h-[500px] bg-blue-600/30 rounded-full mix-blend-screen filter blur-[120px]"></div>
        <div class="absolute top-10 left-1/2 w-[600px] h-[400px] bg-indigo-500/20 rounded-full mix-blend-screen filter blur-[150px] -translate-x-1/2"></div>
        <svg class="absolute inset-0 w-full h-full opacity-50" id="stars-container"></svg>
    </div>

    <!-- ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÅ‡∏™‡∏á‡∏£‡∏∞‡∏¢‡∏¥‡∏ö‡∏£‡∏∞‡∏¢‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ‡∏Ç‡∏≠‡∏á‡∏î‡∏µ (‡∏õ‡∏£‡∏±‡∏ö z-index ‡πÉ‡∏´‡πâ‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤ overlay) -->
    <div id="sparkle-overlay" class="fixed inset-0 pointer-events-none z-[110] hidden items-center justify-center">
        <div class="absolute inset-0 bg-yellow-500/10 animate-pulse"></div>
        <svg class="text-yellow-400 w-32 h-32 animate-ping absolute" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></svg>
    </div>

    <!-- Overlay ‡∏™‡∏∏‡πà‡∏°‡∏Å‡∏≤‡∏ä‡∏≤‡∏™‡∏µ‡∏î‡∏≥‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á -->
    <div id="pull-overlay" class="fixed inset-0 bg-[#0d071a]/95 z-[100] hidden flex-col items-center justify-center p-4 backdrop-blur-md transition-opacity duration-300" onclick="handleOverlayClick(event)">
        
        <h2 id="overlay-skip-text" class="absolute top-10 text-slate-300 font-medium text-lg animate-pulse tracking-wide select-none cursor-pointer">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡πÉ‡∏î‡∏Å‡πá‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡πâ‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á</h2>
        
        <!-- ‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ -->
        <div id="overlay-items-container" class="grid grid-cols-2 sm:grid-cols-5 gap-4 max-w-5xl w-full justify-center content-center flex-1">
            <!-- Items ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏¢‡∏¥‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
        </div>

        <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏î‡∏™‡∏∏‡πà‡∏°‡∏ï‡πà‡∏≠ -->
        <div id="overlay-actions" class="hidden absolute bottom-10 flex flex-col items-center gap-4">
            <div class="flex flex-wrap justify-center gap-4">
                <button id="btn-overlay-1" onclick="pull(1, true)" class="bg-gradient-to-b from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 text-white px-8 py-4 rounded-full font-bold shadow-lg transform active:scale-95 transition-all flex items-center gap-2 text-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></svg>
                    ‡πÄ‡∏õ‡∏¥‡∏î 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
                </button>
                <button id="btn-overlay-10" onclick="pull(10, true)" class="bg-gradient-to-b from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-600 text-slate-900 px-8 py-4 rounded-full font-black shadow-lg transform active:scale-95 transition-all flex items-center gap-2 text-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>
                    ‡πÄ‡∏õ‡∏¥‡∏î 10 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
                </button>
            </div>
            <div class="text-slate-400 font-medium mt-2 select-none cursor-pointer hover:text-white transition-colors bg-black/40 px-6 py-2 rounded-full border border-slate-700">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</div>
        </div>
    </div>

    <div class="max-w-5xl mx-auto relative z-10">
        <!-- ‡∏™‡πà‡∏ß‡∏ô Header -->
        <div class="flex flex-col items-center mb-10 pt-4">
            <div id="egg-container" class="relative flex items-center justify-center mb-8 transition-all duration-300 hover:scale-105">
                <!-- ‡∏≠‡∏≠‡∏£‡πà‡∏≤‡πÅ‡∏™‡∏á‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏Ç‡πà -->
                <div id="egg-glow" class="absolute w-64 h-64 bg-blue-500 rounded-full blur-[80px] opacity-40"></div>
                <!-- ‡∏£‡∏π‡∏õ‡πÑ‡∏Ç‡πà ‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå /OGHza/images/egg.png -->
                <img id="egg-img" src="/OGHza/images/egg.png" alt="Aquarius Diadem Egg" class="relative z-10 w-64 md:w-80 drop-shadow-[0_0_50px_rgba(59,130,246,0.6)] object-contain transition-transform duration-300" />
            </div>

            <h1 class="text-4xl md:text-6xl font-black text-center mb-2 drop-shadow-[0_4px_4px_rgba(0,0,0,0.8)] georgia-font">
                <span class="bg-gradient-to-b from-yellow-200 via-yellow-400 to-yellow-600 bg-clip-text text-transparent">AQUARIUS </span>
                <span class="bg-gradient-to-b from-blue-200 via-blue-400 to-blue-600 bg-clip-text text-transparent">DIADEM</span>
            </h1>
            <p class="text-blue-200 font-medium tracking-widest uppercase mb-6 text-sm md:text-base drop-shadow-md">Scroll Simulator</p>
        </div>

        <!-- ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß -->
        <div class="bg-white/95 backdrop-blur-md rounded-[40px] p-6 md:p-10 shadow-[0_20px_50px_rgba(0,0,0,0.5)] border border-white/20 relative">
            
            <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏∏‡πà‡∏°‡∏Å‡∏≤‡∏ä‡∏≤‡∏´‡∏•‡∏±‡∏Å -->
            <div class="flex flex-wrap justify-center gap-4 mb-8 pb-8 border-b border-slate-200">
                <button id="btn-pull-1" onclick="pull(1)" class="bg-gradient-to-b from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 text-white px-8 py-4 rounded-full font-bold shadow-lg transform active:scale-95 transition-all disabled:opacity-50 flex items-center gap-2 text-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></svg>
                    ‡πÄ‡∏õ‡∏¥‡∏î 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
                </button>
                <button id="btn-pull-10" onclick="pull(10)" class="bg-gradient-to-b from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-600 text-slate-900 px-8 py-4 rounded-full font-black shadow-lg transform active:scale-95 transition-all disabled:opacity-50 flex items-center gap-2 text-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>
                    ‡πÄ‡∏õ‡∏¥‡∏î 10 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
                </button>
                <div class="w-full text-center mt-3 text-slate-500 font-medium">
                    ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span id="total-pulls-text" class="text-blue-600 font-bold text-xl">0</span> ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                
                <!-- ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ö‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô -->
                <div class="lg:col-span-2">
                    <!-- Default Empty State -->
                    <div id="empty-inventory-state" class="h-48 flex flex-col items-center justify-center border-2 border-dashed border-slate-200 rounded-3xl bg-slate-50 text-slate-400 font-medium">
                        <svg class="mb-2 text-slate-300" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></svg>
                        ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏•‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏Ç‡πà
                    </div>

                    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÑ‡∏≠‡πÄ‡∏ó‡∏° (Inventory) -->
                    <div id="inventory-section" class="hidden">
                        <div class="flex justify-between items-center mb-4 pb-2 border-b border-slate-100">
                            <h3 class="text-xl font-bold flex items-center gap-2 text-slate-800">
                                <svg class="text-indigo-500" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m7.5 4.27 9 5.15"/><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22V12"/></svg>
                                ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÑ‡∏≠‡πÄ‡∏ó‡∏° (Inventory)
                            </h3>
                            <button onclick="resetData()" class="px-4 py-2 text-sm text-red-500 hover:text-red-700 bg-red-50 hover:bg-red-100 rounded-lg flex items-center justify-center gap-1 transition-colors font-medium">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>
                                ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                            </button>
                        </div>
                        <div id="inventory-container" class="grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 gap-3">
                            <!-- Inventory items will be injected here -->
                        </div>
                    </div>
                </div>

                <!-- ‡πÅ‡∏ú‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤ (Rates & Stats) -->
                <div class="space-y-6">
                    
                    <!-- ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ß‡∏±‡∏î‡∏î‡∏ß‡∏á (Luck Meter) -->
                    <div id="luck-meter-container" class="bg-slate-50 rounded-3xl p-6 border border-slate-200 hidden">
                        <h3 class="text-lg font-bold mb-4 flex items-center gap-2 text-slate-800">
                            <svg class="text-purple-500" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></svg>
                            ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ß‡∏±‡∏î‡∏î‡∏ß‡∏á (Luck Meter)
                        </h3>
                        <div class="text-center bg-white rounded-2xl p-4 border border-slate-100 shadow-sm mb-4">
                            <div id="luck-tier-name" class="text-2xl font-black mb-1">üëë ‡∏•‡∏π‡∏Å‡∏£‡∏±‡∏Å GM</div>
                            <div id="luck-tier-desc" class="text-sm font-medium text-slate-500">‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏ä‡∏≤‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢!</div>
                        </div>
                        <div class="space-y-2 text-sm font-medium text-slate-600 bg-white p-3 rounded-xl border border-slate-100 shadow-sm">
                            <div class="flex justify-between"><span>‡πÅ‡∏ï‡πâ‡∏°‡∏î‡∏ß‡∏á‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢:</span> <span id="luck-score-text" class="font-bold">120%</span></div>
                            <div class="flex justify-between"><span>SSR ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á:</span> <span id="luck-ssr-actual" class="font-bold text-yellow-600">2</span></div>
                            <div class="flex justify-between text-xs text-slate-400"><span>SSR ‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏à‡∏∞‡πÑ‡∏î‡πâ (‡∏ï‡∏≤‡∏°‡πÄ‡∏£‡∏ó):</span> <span id="luck-ssr-expected">0.50</span></div>
                        </div>
                    </div>

                    <div class="bg-slate-50 rounded-3xl p-6 border border-slate-200">
                        <h3 class="text-lg font-bold mb-4 flex items-center gap-2 text-slate-800">
                            <svg class="text-blue-500" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
                            ‡πÄ‡∏£‡∏ó‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏° (Rates)
                        </h3>
                        <div id="rates-container" class="space-y-3">
                            <!-- Rates will be injected here -->
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script>
        // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏£‡∏π‡∏õ‡πÅ‡∏¢‡∏Å‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡∏¥‡πâ‡∏ô /OGHza/images/1.png - /OGHza/images/26.png ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏à‡∏≤‡∏Å‡∏ã‡πâ‡∏≤‡∏¢‡πÑ‡∏õ‡∏Ç‡∏ß‡∏≤ ‡∏ö‡∏ô‡∏•‡∏á‡∏•‡πà‡∏≤‡∏á 
        const ITEMS = [
            // Row 1: SSR (1-5)
            { id: 'ssr1', name: 'Sealed Card Album II', rank: 'SSR', qty: 1, imgSrc: '/OGHza/images/1.png' },
            { id: 'ssr2', name: 'Sealed Card Album', rank: 'SSR', qty: 1, imgSrc: '/OGHza/images/2.png' },
            { id: 'ssr3', name: 'Costume Arabian Veil', rank: 'SSR', qty: 1, imgSrc: '/OGHza/images/3.png' },
            { id: 'ssr4', name: "Rasen Huuma's Orb [1]", rank: 'SSR', qty: 1, imgSrc: '/OGHza/images/4.png' },
            { id: 'ssr5', name: 'Aquarius Diadem [1]', rank: 'SSR', qty: 1, imgSrc: '/OGHza/images/5.png' },

            // Row 2: SR, R (6-10)
            { id: 'sr1', name: 'Aquarius Staff [2]', rank: 'SR', qty: 1, imgSrc: '/OGHza/images/6.png' },
            { id: 'sr2', name: 'Aquarius Ring [1]', rank: 'SR', qty: 1, imgSrc: '/OGHza/images/7.png' },
            { id: 'sr3', name: 'Huuma Shuriken Clearness [2]', rank: 'SR', qty: 1, imgSrc: '/OGHza/images/8.png' },
            { id: 'r1', name: 'Cross Shuriken Shadow Earring', rank: 'R', qty: 1, imgSrc: '/OGHza/images/9.png' },
            { id: 'r2', name: 'Magic Compose Shadow Armor', rank: 'R', qty: 1, imgSrc: '/OGHza/images/10.png' },

            // Row 3: R, A, B (11-16)
            { id: 'r3', name: 'Blitz Shadow Pendant', rank: 'R', qty: 1, imgSrc: '/OGHza/images/11.png' },
            { id: 'r4', name: 'Blitz Shadow Earring', rank: 'R', qty: 1, imgSrc: '/OGHza/images/12.png' },
            { id: 'r5', name: 'Status Shadow Item Combiner', rank: 'R', qty: 1, imgSrc: '/OGHza/images/13.png' },
            { id: 'a1', name: 'Blood Twig', rank: 'A', qty: 1, imgSrc: '/OGHza/images/14.png' },
            { id: 'b1', name: 'Class Shadow Cube', rank: 'B', qty: 1, imgSrc: '/OGHza/images/15.png' },
            { id: 'b2', name: 'Poison Bottle Box', rank: 'B', qty: 1, imgSrc: '/OGHza/images/16.png' },

            // Row 4: Biscuit Sticks (17-22) ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ [Scroll]
            { id: 'b3', name: '[Scroll] STR Biscuit Stick', rank: 'B', qty: 2, imgSrc: '/OGHza/images/17.png' },
            { id: 'b4', name: '[Scroll] AGI Biscuit Stick', rank: 'B', qty: 2, imgSrc: '/OGHza/images/18.png' },
            { id: 'b5', name: '[Scroll] INT Biscuit Stick', rank: 'B', qty: 2, imgSrc: '/OGHza/images/19.png' },
            { id: 'b6', name: '[Scroll] VIT Biscuit Stick', rank: 'B', qty: 2, imgSrc: '/OGHza/images/20.png' },
            { id: 'b7', name: '[Scroll] DEX Biscuit Stick', rank: 'B', qty: 2, imgSrc: '/OGHza/images/21.png' },
            { id: 'b8', name: '[Scroll] LUK Biscuit Stick', rank: 'B', qty: 2, imgSrc: '/OGHza/images/22.png' },

            // Row 5: C, E (23-26) ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ [Scroll]
            { id: 'c1', name: '[Scroll] Blessing Lv.10 Scroll', rank: 'C', qty: 10, imgSrc: '/OGHza/images/23.png' },
            { id: 'c2', name: '[Scroll] Increase Agility Lv.10 Scroll', rank: 'C', qty: 10, imgSrc: '/OGHza/images/24.png' },
            { id: 'e1', name: '[Scroll] Ex Def Potion', rank: 'E', qty: 5, imgSrc: '/OGHza/images/25.png' },
            { id: 'e2', name: '[Scroll] Kafra Card', rank: 'E', qty: 5, imgSrc: '/OGHza/images/26.png' },
        ];

        // ‡∏õ‡∏£‡∏±‡∏ö Drop Rates ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏£‡∏ó‡∏≠‡∏≠‡∏£‡∏¥‡∏à‡∏¥‡∏ô‡∏±‡∏•
        const RATES = {
            SSR: 0.5, SR: 2.5, R: 12.0, A: 15.0, B: 30.0, C: 20.0, E: 20.0,
        };

        // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á ‡∏™‡∏µ‡∏Å‡∏£‡∏≠‡∏ö ‡πÅ‡∏•‡∏∞‡∏™‡∏µ‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞ Rank (‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡∏°‡πà)
        const RANK_STYLES = {
            'SSR': { bg: 'bg-gradient-to-br from-yellow-100 via-amber-100 to-yellow-300 ssr-glow', border: 'border-yellow-400', text: 'text-amber-800 font-extrabold', grad: 'from-amber-400 to-yellow-600' }, // ‡∏ó‡∏≠‡∏á‡∏£‡∏∞‡∏¢‡∏¥‡∏ö‡∏£‡∏∞‡∏¢‡∏±‡∏ö
            'SR': { bg: 'bg-purple-50', border: 'border-purple-400', text: 'text-purple-700', grad: 'from-purple-400 to-purple-600' }, // ‡∏°‡πà‡∏ß‡∏á
            'R': { bg: 'bg-blue-50', border: 'border-blue-400', text: 'text-blue-700', grad: 'from-blue-400 to-blue-600' }, // ‡∏ü‡πâ‡∏≤
            'A': { bg: 'bg-emerald-50', border: 'border-emerald-400', text: 'text-emerald-700', grad: 'from-emerald-400 to-emerald-600' }, // ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß
            'B': { bg: 'bg-lime-50', border: 'border-lime-400', text: 'text-lime-700', grad: 'from-lime-400 to-lime-600' }, // ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏≠‡πà‡∏≠‡∏ô
            'C': { bg: 'bg-white', border: 'border-gray-300', text: 'text-gray-700', grad: 'from-gray-300 to-gray-400' }, // ‡∏Ç‡∏≤‡∏ß
            'E': { bg: 'bg-gray-100', border: 'border-gray-400', text: 'text-gray-600', grad: 'from-gray-400 to-gray-500' } // ‡πÄ‡∏ó‡∏≤
        };

        // ‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏≠‡πÄ‡∏ó‡∏°‡πÅ‡∏ï‡πà‡∏•‡∏∞ Rank (‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô)
        const RANK_POINTS = {
            'SSR': 500,  
            'SR': 100,   
            'R': 20,     
            'A': 15,     
            'B': 5,      
            'C': 2,      
            'E': 1       
        };
        // Expected Value (EV) ‡∏ï‡πà‡∏≠ 1 ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ó‡∏§‡∏©‡∏é‡∏µ‡πÄ‡∏£‡∏ó‡∏≠‡∏≠‡∏£‡∏¥‡∏à‡∏¥‡∏ô‡∏±‡∏• = 11.75 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
        const EXPECTED_SCORE_PER_PULL = 11.75;

        // ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÅ‡∏≠‡∏õ (App State)
        let history = [];
        let lastPulls = [];
        let totalPulls = 0;
        let isSpinning = false;
        
        // ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö Overlay Animation
        let currentAnimationInterval = null;
        let currentPullsToAnimate = [];
        let isOverlayAnimating = false;

        // ‡∏ß‡∏≤‡∏î‡∏î‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
        function renderStars() {
            const container = document.getElementById('stars-container');
            let starsHTML = '';
            for(let i=0; i<60; i++) {
                const cx = Math.random() * 100;
                const cy = Math.random() * 100;
                const r = Math.random() * 1.5 + 0.5;
                const opacity = Math.random() * 0.8 + 0.2;
                starsHTML += `<circle cx="${cx}%" cy="${cy}%" r="${r}" fill="white" opacity="${opacity}" />`;
            }
            container.innerHTML = starsHTML;
        }

        function renderRates() {
            const container = document.getElementById('rates-container');
            let html = '';
            for (const [rank, rate] of Object.entries(RATES)) {
                const style = RANK_STYLES[rank];
                html += `
                    <div class="flex justify-between items-center text-sm font-medium">
                        <span class="w-8 font-black text-transparent bg-clip-text bg-gradient-to-b ${style.grad}">${rank}</span>
                        <div class="flex-1 mx-3 h-2 bg-slate-200 rounded-full overflow-hidden">
                            <div class="h-full bg-gradient-to-r ${style.grad}" style="width: ${rate}%"></div>
                        </div>
                        <span class="text-slate-600 w-10 text-right">${rate}%</span>
                    </div>
                `;
            }
            container.innerHTML = html;
        }

        // ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÑ‡∏≠‡πÄ‡∏ó‡∏°
        function renderInventory() {
            const section = document.getElementById('inventory-section');
            const container = document.getElementById('inventory-container');
            const emptyState = document.getElementById('empty-inventory-state');
            
            if (history.length === 0) {
                section.classList.add('hidden');
                emptyState.classList.remove('hidden');
                emptyState.classList.add('flex');
                return;
            }
            
            section.classList.remove('hidden');
            emptyState.classList.add('hidden');
            emptyState.classList.remove('flex');

            const inventory = {};
            history.forEach(item => {
                if (inventory[item.id]) {
                    inventory[item.id].totalCount += item.qty;
                } else {
                    inventory[item.id] = { ...item, totalCount: item.qty };
                }
            });

            const rankOrder = { 'SSR': 1, 'SR': 2, 'R': 3, 'A': 4, 'B': 5, 'C': 6, 'E': 7 };
            const sortedItems = Object.values(inventory).sort((a, b) => rankOrder[a.rank] - rankOrder[b.rank]);

            let html = '';
            sortedItems.forEach(item => {
                const style = RANK_STYLES[item.rank];
                
                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏¢‡πÉ‡∏´‡πâ SSR
                let bgEffect = '';
                if (item.rank === 'SSR') {
                    bgEffect = `
                        <div class="absolute inset-0 shimmer mix-blend-overlay pointer-events-none rounded-xl"></div>
                        <div class="absolute top-1 left-2 text-xs animate-ping pointer-events-none">‚ú®</div>
                        <div class="absolute bottom-8 right-2 text-xs animate-pulse pointer-events-none">‚ú®</div>
                    `;
                }

                html += `
                    <div class="${style.bg} border-2 ${style.border} p-2 rounded-2xl text-center flex flex-col items-center justify-between min-h-[160px] hover:shadow-md transition-all relative overflow-hidden">
                        ${bgEffect}
                        <!-- ‡∏õ‡πâ‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏î‡∏±‡∏ô‡πÑ‡∏õ‡∏ä‡∏¥‡∏î‡∏Ç‡∏≠‡∏ö‡∏™‡∏∏‡∏î‡πÜ -->
                        <div class="absolute top-1.5 right-1.5 text-[10px] font-black px-2 py-0.5 rounded-full text-white bg-slate-800/90 shadow border border-slate-600 z-20">
                            x${item.totalCount.toLocaleString()}
                        </div>
                        <!-- ‡∏î‡∏±‡∏ô‡∏£‡∏π‡∏õ‡∏•‡∏á‡∏°‡∏≤ (mt-6) ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ä‡∏ô‡∏õ‡πâ‡∏≤‡∏¢ -->
                        <img src="${item.imgSrc}" alt="${item.name}" class="w-14 h-14 mt-6 z-10 object-contain drop-shadow-md" />
                        <div class="z-10 w-full mt-2 pb-1 relative">
                            <p class="text-[11px] font-bold leading-tight line-clamp-2 ${style.text}">${item.name}</p>
                        </div>
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Å‡∏•‡∏∑‡∏≠ (Luck Calculator)
        function updateLuckMeter() {
            const container = document.getElementById('luck-meter-container');
            if (totalPulls === 0) {
                container.classList.add('hidden');
                return;
            }
            container.classList.remove('hidden');

            let totalPoints = 0;
            let ssrCount = 0;
            
            history.forEach(item => {
                totalPoints += RANK_POINTS[item.rank] || 0;
                if (item.rank === 'SSR') ssrCount++;
            });

            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì % ‡∏î‡∏ß‡∏á‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ó‡∏≤‡∏á‡∏ó‡∏§‡∏©‡∏é‡∏µ (Expected Value)
            const avgPoints = totalPoints / totalPulls;
            const luckRatio = avgPoints / EXPECTED_SCORE_PER_PULL;
            const luckPercent = (luckRatio * 100).toFixed(0);

            let tierName, tierDesc, tierColor;

            if (luckRatio >= 2.0) { 
                tierName = 'üëë ‡∏•‡∏π‡∏Å‡∏£‡∏±‡∏Å GM'; tierDesc = '‡∏î‡∏ß‡∏á‡πÄ‡∏ó‡∏û‡∏ó‡∏£‡∏π ‡∏£‡∏±‡∏ö‡∏à‡πâ‡∏≤‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏ä‡∏≤‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢!'; tierColor = 'text-purple-600'; 
            } else if (luckRatio >= 1.2) { 
                tierName = '‚ú® ‡∏î‡∏ß‡∏á‡∏î‡∏µ'; tierDesc = '‡∏Å‡∏≥‡πÑ‡∏£‡πÄ‡∏´‡πá‡∏ô‡πÜ ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏î‡∏ß‡∏á‡∏°‡∏≤!'; tierColor = 'text-blue-600'; 
            } else if (luckRatio >= 0.8) { 
                tierName = 'üòê ‡∏õ‡∏Å‡∏ï‡∏¥'; tierDesc = '‡πÄ‡∏£‡∏ó‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏•‡∏∑‡∏≠ ‡πÑ‡∏°‡πà‡πÄ‡∏à‡πá‡∏ö'; tierColor = 'text-green-600'; 
            } else if (luckRatio >= 0.5) { 
                tierName = 'üßÇ ‡πÄ‡∏Å‡∏•‡∏∑‡∏≠'; tierDesc = '‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Ñ‡πá‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞ ‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÑ‡∏ï‡∏û‡∏±‡∏á'; tierColor = 'text-orange-500'; 
            } else { 
                tierName = 'üíÄ ‡∏ó‡∏∞‡πÄ‡∏•‡πÄ‡∏î‡∏î‡∏ã‡∏µ'; tierDesc = '‡πÄ‡∏Ñ‡πá‡∏°‡∏õ‡∏µ‡πã! ‡∏û‡∏±‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô...'; tierColor = 'text-red-600'; 
            }

            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á SSR ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏£‡∏ó 0.5% (0.005)
            const expectedSSR = (totalPulls * 0.005).toFixed(2);

            document.getElementById('luck-tier-name').innerText = tierName;
            document.getElementById('luck-tier-name').className = `text-2xl font-black mb-1 ${tierColor}`;
            document.getElementById('luck-tier-desc').innerText = tierDesc;
            document.getElementById('luck-score-text').innerText = `${luckPercent}%`;
            document.getElementById('luck-ssr-actual').innerText = ssrCount.toLocaleString();
            document.getElementById('luck-ssr-expected').innerText = expectedSSR;
        }

        // ==========================================
        // ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á Overlay Animation (‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏ä‡∏≤)
        // ==========================================

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á HTML ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÑ‡∏≠‡πÄ‡∏ó‡∏° 1 ‡∏ä‡∏¥‡πâ‡∏ô‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Overlay
        function createOverlayItemHTML(item) {
            const style = RANK_STYLES[item.rank];
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏¢‡πÉ‡∏´‡πâ SSR
            let bgEffect = '';
            if (item.rank === 'SSR') {
                bgEffect = `
                    <div class="absolute inset-0 shimmer mix-blend-overlay pointer-events-none rounded-xl"></div>
                    <div class="absolute top-2 left-3 text-lg animate-ping pointer-events-none">‚ú®</div>
                    <div class="absolute bottom-10 right-3 text-lg animate-pulse pointer-events-none">‚ú®</div>
                `;
            }
            const qtyText = item.qty > 1 ? `<p class="text-xs text-slate-500 font-bold bg-white/80 px-2 py-0.5 rounded-full inline-block mt-1 z-20 relative">${item.qty} ea</p>` : '';

            // ‡πÉ‡∏™‡πà class 'animate-pop-up' ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏î‡πâ‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤
            return `
                <div class="${style.bg} border-2 ${style.border} p-3 rounded-2xl text-center flex flex-col items-center justify-between min-h-[160px] relative overflow-hidden group animate-pop-up shadow-[0_0_20px_rgba(0,0,0,0.5)]">
                    ${bgEffect}
                    <img src="${item.imgSrc}" alt="${item.name}" class="w-24 h-24 mt-4 z-10 object-contain drop-shadow-[0_10px_10px_rgba(0,0,0,0.3)]" />
                    <div class="z-10 w-full mt-2 pb-1 relative">
                        <p class="text-sm font-bold leading-tight line-clamp-2 ${style.text}">${item.name}</p>
                        ${qtyText}
                    </div>
                </div>
            `;
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏µ‡∏•‡∏∞‡∏Å‡∏•‡πà‡∏≠‡∏á
        function startPullAnimation(pulls) {
            currentPullsToAnimate = pulls;
            isOverlayAnimating = true;

            const overlay = document.getElementById('pull-overlay');
            const container = document.getElementById('overlay-items-container');
            const actions = document.getElementById('overlay-actions');
            const skipText = document.getElementById('overlay-skip-text');

            // ‡∏•‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
            container.innerHTML = '';
            actions.classList.add('hidden');
            skipText.classList.remove('hidden');
            
            // ‡πÄ‡∏õ‡∏¥‡∏î Overlay
            overlay.classList.remove('hidden');
            overlay.classList.add('flex');

            let index = 0;
            if (currentAnimationInterval) clearInterval(currentAnimationInterval);

            // ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏¥‡πâ‡∏ô‡πÅ‡∏£‡∏Å‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
            container.insertAdjacentHTML('beforeend', createOverlayItemHTML(pulls[index]));
            index++;

            // ‡∏ñ‡πâ‡∏≤‡∏¢‡∏¥‡∏á‡∏°‡∏≤ 1 ‡∏≠‡∏±‡∏ô ‡∏à‡∏ö‡πÄ‡∏•‡∏¢
            if (index >= pulls.length) {
                setTimeout(endAnimation, 400);
            } else {
                // ‡∏¢‡∏¥‡∏á‡∏°‡∏≤ 10 ‡∏≠‡∏±‡∏ô ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡πÇ‡∏ä‡∏ß‡πå‡∏ó‡∏µ‡∏•‡∏∞‡∏≠‡∏±‡∏ô‡∏ó‡∏∏‡∏Å‡πÜ 0.25 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
                currentAnimationInterval = setInterval(() => {
                    if (index >= pulls.length) {
                        endAnimation();
                        return;
                    }
                    container.insertAdjacentHTML('beforeend', createOverlayItemHTML(pulls[index]));
                    index++;
                }, 250);
            }
        }

        // ‡∏à‡∏ö‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏î‡∏¢‡∏¥‡∏á‡∏ï‡πà‡∏≠ ‡πÅ‡∏•‡∏∞‡πÇ‡∏ä‡∏ß‡πå‡πÅ‡∏™‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡πÜ ‡∏ñ‡πâ‡∏≤‡∏¢‡∏¥‡∏á‡πÑ‡∏î‡πâ‡∏Ç‡∏≠‡∏á‡πÅ‡∏£‡∏£‡πå
        function endAnimation() {
            isOverlayAnimating = false;
            clearInterval(currentAnimationInterval);
            document.getElementById('overlay-actions').classList.remove('hidden');
            document.getElementById('overlay-skip-text').classList.add('hidden');
            
            // ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏™‡∏á‡∏ß‡∏¥‡∏ö‡∏ß‡∏±‡∏ö‡∏ó‡∏∞‡∏•‡∏∏‡∏à‡∏≠ ‡∏ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ SSR
            const hasSSR = currentPullsToAnimate.some(p => p.rank === 'SSR');
            if (hasSSR) {
                const sparkle = document.getElementById('sparkle-overlay');
                sparkle.classList.remove('hidden');
                sparkle.classList.add('flex');
                setTimeout(() => {
                    sparkle.classList.add('hidden');
                    sparkle.classList.remove('flex');
                }, 1500);
            }
        }

        // ‡∏î‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ö‡∏ô Overlay
        function handleOverlayClick(e) {
            // ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏•‡∏¥‡∏Å‡πÇ‡∏î‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏î "‡πÄ‡∏õ‡∏¥‡∏î 1/10 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á" ‡πÉ‡∏´‡πâ‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡πÄ‡∏•‡∏¢ (‡∏Ç‡πâ‡∏≤‡∏°)
            if (e.target.closest('#btn-overlay-1') || e.target.closest('#btn-overlay-10')) return;

            if (isOverlayAnimating) {
                // 1. ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡πà‡∏á‡∏≠‡∏¢‡∏π‡πà -> ‡∏Ç‡πâ‡∏≤‡∏°‡πÇ‡∏ä‡∏ß‡πå‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
                clearInterval(currentAnimationInterval);
                const container = document.getElementById('overlay-items-container');
                for (let i = container.children.length; i < currentPullsToAnimate.length; i++) {
                    container.insertAdjacentHTML('beforeend', createOverlayItemHTML(currentPullsToAnimate[i]));
                }
                endAnimation();
            } else {
                // 2. ‡∏ñ‡πâ‡∏≤‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏•‡∏¥‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡πÜ -> ‡∏õ‡∏¥‡∏î Overlay
                closeOverlay();
            }
        }

        // ‡∏õ‡∏¥‡∏î Overlay ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
        function closeOverlay() {
            const overlay = document.getElementById('pull-overlay');
            overlay.classList.add('hidden');
            overlay.classList.remove('flex');
        }

        // ==========================================
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏∏‡πà‡∏°‡∏Å‡∏≤‡∏ä‡∏≤‡∏´‡∏•‡∏±‡∏Å (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Overlay)
        // ==========================================
        function pull(count, fromOverlay = false) {
            if (isSpinning) return;
            isSpinning = true;

            // ‡∏ñ‡πâ‡∏≤‡∏Å‡∏î‡∏™‡∏∏‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å ‡∏à‡∏∞‡∏°‡∏µ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡πÑ‡∏Ç‡πà‡∏™‡∏±‡πà‡∏ô‡∏™‡∏±‡πâ‡∏ô‡πÜ ‡∏Å‡πà‡∏≠‡∏ô
            if (!fromOverlay) {
                document.getElementById('btn-pull-1').disabled = true;
                document.getElementById('btn-pull-10').disabled = true;
                document.getElementById('egg-container').classList.remove('hover:scale-105');
                document.getElementById('egg-container').classList.add('scale-110');
                document.getElementById('egg-img').classList.add('animate-bounce');
                document.getElementById('egg-glow').classList.add('animate-pulse');
            } else {
                // ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡∏Å‡∏î‡∏™‡∏∏‡πà‡∏°‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡πÉ‡∏ô Overlay ‡πÉ‡∏´‡πâ‡∏•‡πâ‡∏≤‡∏á‡∏à‡∏≠‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
                document.getElementById('overlay-actions').classList.add('hidden');
                document.getElementById('overlay-skip-text').classList.remove('hidden');
                document.getElementById('overlay-items-container').innerHTML = '';
            }

            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ
            const newPulls = [];
            for (let i = 0; i < count; i++) {
                const rand = Math.random() * 100;
                let cumulative = 0;
                let selectedRank = 'E';

                for (const [rank, rate] of Object.entries(RATES)) {
                    cumulative += rate;
                    if (rand <= cumulative) {
                        selectedRank = rank;
                        break;
                    }
                }
                const possibleItems = ITEMS.filter(item => item.rank === selectedRank);
                const selectedItem = possibleItems[Math.floor(Math.random() * possibleItems.length)];
                newPulls.push({ ...selectedItem, timestamp: Date.now() + i });
            }

            // ‡∏ñ‡πâ‡∏≤‡∏¢‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡πÉ‡∏ô Overlay ‡πÉ‡∏´‡πâ‡∏•‡∏∏‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏•‡∏¢ ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡∏¢‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≤‡∏á‡∏ô‡∏≠‡∏Å‡∏£‡∏≠‡πÑ‡∏Ç‡πà‡∏™‡∏±‡πà‡∏ô 0.6 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏Å‡πà‡∏≠‡∏ô
            const delay = fromOverlay ? 50 : 600;

            setTimeout(() => {
                lastPulls = newPulls;
                history = [...newPulls, ...history]; // ‡πÄ‡∏Å‡πá‡∏ö‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                totalPulls += count;
                isSpinning = false;

                if (!fromOverlay) {
                    // ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                    document.getElementById('btn-pull-1').disabled = false;
                    document.getElementById('btn-pull-10').disabled = false;
                    document.getElementById('egg-container').classList.add('hover:scale-105');
                    document.getElementById('egg-container').classList.remove('scale-110');
                    document.getElementById('egg-img').classList.remove('animate-bounce');
                    document.getElementById('egg-glow').classList.remove('animate-pulse');
                }

                // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏ô‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏´‡∏•‡∏±‡∏Å (‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á) ‡∏£‡∏≠‡πÑ‡∏ß‡πâ‡πÄ‡∏•‡∏¢
                document.getElementById('total-pulls-text').innerText = totalPulls.toLocaleString();
                renderInventory();
                updateLuckMeter();

                // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏´‡πâ Overlay ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡πÇ‡∏ä‡∏ß‡πå‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡πÄ‡∏î‡πâ‡∏á‡∏Ç‡∏≠‡∏á
                startPullAnimation(newPulls);

            }, delay);
        }

        // ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        function resetData() {
            history = [];
            lastPulls = [];
            totalPulls = 0;
            document.getElementById('total-pulls-text').innerText = '0';
            renderInventory();
            updateLuckMeter();
        }

        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
        window.onload = () => {
            renderStars();
            renderRates();
            renderInventory();
            updateLuckMeter();
        };
    </script>
</body>
</html>
